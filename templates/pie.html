<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>

</head>
<body>
<h2 style="text-align: center;margin-left: -150px">词性分析统计</h2>
<div id="bj_main" style="width: 1800px;height:1300px;margin-left: 150px"></div>
</body>
</html>


<script type="text/javascript">

    $.ajax({
        url: "/api/pie",
        type: 'GET',
        async: false,
        success: function (Response) {

            var myChart = echarts.init(document.getElementById('bj_main'));
            let bgColor = '#fff';
            let title = '总量';
            let color = ['#c065e7', '#765deb', '#3862d8', '#6a89E2', '#219CF9', '#6efbbf', '#40c057', '#ffd351', '#ff8e43', '#f56b6d'];
            let echartData = Response.res_list;
            let formatNumber = function (num) {
                let reg = /(?=(\B)(\d{3})+$)/g;
                return num.toString().replace(reg, ',');
            }
            let total = echartData.reduce((a, b) => {
                return a + b.value * 1
            }, 0);
            option = {
                backgroundColor: bgColor,
                color: color,
                tooltip: {
                    trigger: 'item'
                },
                title: [{
                    text: '{name|' + title + '}\n{val|' + formatNumber(total) + '}',
                    top: 'center',
                    left: 'center',
                    textStyle: {
                        rich: {
                            name: {
                                fontSize: 14,
                                fontWeight: 'normal',
                                color: '#000',
                                padding: [10, 0]
                            },
                            val: {
                                fontSize: 32,
                                fontWeight: 'bolder',
                                color: '#000',
                            }
                        }
                    }
                }, {
                    text: '单位：个',
                    top: 20,
                    left: 20,
                    textStyle: {
                        fontSize: 14,
                        color: '#666666',
                        fontWeight: 400
                    },
                    show: false
                }],
                series: [{
                    type: 'pie',
                    roseType: 'radius',
                    radius: ['25%', '60%'],
                    center: ['50%', '50%'],
                    data: echartData,
                    hoverAnimation: false,
                    itemStyle: {
                        normal: {
                            borderColor: bgColor,
                            borderWidth: 2
                        }
                    },
                    labelLine: {
                        normal: {
                            length: 20,
                            length2: 120,
                            lineStyle: {
                                // color: '#e6e6e6'
                            }
                        }
                    },
                    label: {
                        normal: {
                            formatter: params => {
                                return (
                                    '{icon|●}{name|' + params.name + '}\n{value|' +
                                    formatNumber(params.value) + '}'
                                );
                            },
                            // padding: [0 , -100, 25, -100],
                            rich: {
                                icon: {
                                    fontSize: 16,
                                    color: 'inherit'
                                },
                                name: {
                                    fontSize: 18,
                                    padding: [0, 0, 0, 10],
                                    color: '#000'
                                },
                                value: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    padding: [10, 0, 0, 20],
                                    color: 'inherit'
                                    // color: '#333333'
                                }
                            }
                        }
                    },
                }]
            };
            myChart.setOption(option);

        }
    });

</script>